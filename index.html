<!DOCTYPE html>
<head>
<meta charset="utf-8" />

<!-- Set the viewport width to device width for mobile -->
<meta name="viewport" content="width=device-width" />
<title>Zacks</title>
</head>
<body>
<table id="stocks">
  <tr>
    <td>
      Symbol
    </td>
    <td>
      Zacks Rank
    </td>    
  </tr>  
</table>

<script>

async function getZacksData(symbols) {
  let response = await fetch(`https://quote-feed.zacks.com/index.php?t=${symbols.join(',')}`);
  let data = await response.json();
  return data;
};
  
 
async function fillTable(set) {
  let table = document.getElementById("stocks");  
  let data = await getZacksData(set);
  
  set.forEach(symbol => {
    let newRow = table.insertRow();
    let symbolRow = newRow.insertCell(0);
    let zacksRow = newRow.insertCell(1);  
    symbolRow.innerHTML = `<a href="https://www.zacks.com/stock/quote/${symbol}">${symbol}</a>`;
    if(data[symbol].hasOwnProperty('zacks_rank') && data[symbol].zacks_rank.length > 0) {
      zacksRow.innerHTML = data[symbol].zacks_rank + " - " + data[symbol].zacks_rank_text;
    } else {
      zacksRow.innerHTML = "N/A";
    }
  });
};  
  
let letters = ['0','A','B','C','D','E','F','G','H','I.J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];

let lookups = [
  'https://www.advfn.com/nasdaq/nasdaq.asp?companies=',
  'https://www.advfn.com/nyse/newyorkstockexchange.asp?companies=',
  'https://www.advfn.com/amex/americanstockexchange.asp?companies='
]

async function start() {
  for (const letter of letters) {
    
    let nasdaq = await fetch(lookups[0] + letter);
    console.log(response);
    
    let nyse = await fetch(lookups[1] + letter);
    console.log(response);
    
    let amex = await fetch(lookups[2] + letter);
    console.log(response);
  }
};
  
start();
  
</script>
</body>
</html>
